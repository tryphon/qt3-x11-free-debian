qt-bugs@ issue : N175791
bugs.kde.org number :
applied: yes
author: mueller@kde.org

fixes an off-by-one buffer overflow in the utf8 decoder


--- a/src/codecs/qutfcodec.cpp
+++ b/src/codecs/qutfcodec.cpp
@@ -303,7 +303,7 @@ public:
     QString toUnicode(const char* chars, int len)
     {
 	QString result;
-	result.setLength( len ); // worst case
+	result.setLength( len + 1 ); // worst case
 	QChar *qch = (QChar *)result.unicode();
 	QChar ch;
 	while ( len-- ) {
